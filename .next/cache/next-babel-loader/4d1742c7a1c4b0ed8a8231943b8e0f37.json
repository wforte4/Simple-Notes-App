{"ast":null,"code":"import _regeneratorRuntime from \"/Users/williamforte/Canvas/SynapseFlash/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/williamforte/Canvas/SynapseFlash/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport Router from 'next/router';\nimport { Cookies } from 'react-cookie';\nimport jwt_decode from 'jwt-decode';\nimport { baseConfig } from './restservice';\nvar cookies = new Cookies();\nexport function createProfile(_x, _x2, _x3, _x4) {\n  return _createProfile.apply(this, arguments);\n}\n\nfunction _createProfile() {\n  _createProfile = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(firstname, lastname, email, password) {\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            // Request data to post to createprofile route on rest api\n            fetch(baseConfig.baseURL + '/users', {\n              method: 'POST',\n              headers: {\n                \"Content-type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                \"firstName\": firstname,\n                \"lastName\": lastname,\n                \"email\": email,\n                \"password\": password\n              })\n            }).then(function (response) {\n              return response.json();\n            }).then(function (data) {\n              console.log('Request succeeded with JSON response', data);\n            })[\"catch\"](function (error) {\n              console.log('Request failed', error);\n            });\n\n          case 1:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n  return _createProfile.apply(this, arguments);\n}\n\nexport function loginRequest(_x5, _x6) {\n  return _loginRequest.apply(this, arguments);\n}\n\nfunction _loginRequest() {\n  _loginRequest = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(email, password) {\n    var newLogin;\n    return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n      while (1) {\n        switch (_context2.prev = _context2.next) {\n          case 0:\n            _context2.next = 2;\n            return fetch(baseConfig.baseURL + '/auth', {\n              method: 'POST',\n              headers: {\n                \"Content-type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                \"email\": email,\n                \"password\": password\n              })\n            }).then(function (response) {\n              return response.json();\n            }).then(function (data) {\n              cookies.set('accessToken', data.accessToken);\n              cookies.set('refreshToken', data.refreshToken);\n              var decoded = jwt_decode(data.accessToken);\n              cookies.set('name', decoded.name);\n              cookies.set('email', decoded.email);\n              cookies.set('refreshKey', decoded.refreshKey);\n              cookies.set('permission_level', decoded.permissionLevel);\n              cookies.set('userId', decoded.userId);\n            })[\"catch\"](function (error) {\n              return error;\n            });\n\n          case 2:\n            newLogin = _context2.sent;\n\n            if (!newLogin) {\n              _context2.next = 5;\n              break;\n            }\n\n            return _context2.abrupt(\"return\", \"Username/Password does not match our records!\");\n\n          case 5:\n          case \"end\":\n            return _context2.stop();\n        }\n      }\n    }, _callee2);\n  }));\n  return _loginRequest.apply(this, arguments);\n}\n\nexport function Logout() {\n  return _Logout.apply(this, arguments);\n}\n_c2 = Logout;\n\nfunction _Logout() {\n  _Logout = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee3() {\n    return _regeneratorRuntime.wrap(function _callee3$(_context3) {\n      while (1) {\n        switch (_context3.prev = _context3.next) {\n          case 0:\n            cookies.remove('accessToken');\n            cookies.remove('permission_level');\n            cookies.remove('refreshToken');\n            cookies.remove('name');\n            cookies.remove('email');\n            cookies.remove('refreshKey');\n            cookies.remove('userId');\n            _context3.next = 9;\n            return Router.push(\"/login\");\n\n          case 9:\n          case \"end\":\n            return _context3.stop();\n        }\n      }\n    }, _callee3);\n  }));\n  return _Logout.apply(this, arguments);\n}\n\n_c = Logout;\nexport function submitContact(_x7, _x8, _x9, _x10) {\n  return _submitContact.apply(this, arguments);\n}\n\nfunction _submitContact() {\n  _submitContact = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee4(name, message, email, cellphone) {\n    var newfetch;\n    return _regeneratorRuntime.wrap(function _callee4$(_context4) {\n      while (1) {\n        switch (_context4.prev = _context4.next) {\n          case 0:\n            _context4.next = 2;\n            return fetch(baseConfig.baseURL + '/contact', {\n              method: 'POST',\n              headers: {\n                \"Content-type\": \"application/json\"\n              },\n              body: JSON.stringify({\n                \"name\": name,\n                \"message\": message,\n                \"cellphone\": cellphone,\n                \"email\": email\n              })\n            }).then(function (res) {\n              return res.status;\n            })[\"catch\"](function (error) {\n              console.log('Request failed', error);\n            });\n\n          case 2:\n            newfetch = _context4.sent;\n\n            if (!newfetch) {\n              _context4.next = 7;\n              break;\n            }\n\n            return _context4.abrupt(\"return\", newfetch);\n\n          case 7:\n            return _context4.abrupt(\"return\", 404);\n\n          case 8:\n          case \"end\":\n            return _context4.stop();\n        }\n      }\n    }, _callee4);\n  }));\n  return _submitContact.apply(this, arguments);\n}\n\nexport function createTask(_x11, _x12, _x13, _x14) {\n  return _createTask.apply(this, arguments);\n}\n\nfunction _createTask() {\n  _createTask = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee5(objective, status, priority, assignee) {\n    var getCookies, newTask;\n    return _regeneratorRuntime.wrap(function _callee5$(_context5) {\n      while (1) {\n        switch (_context5.prev = _context5.next) {\n          case 0:\n            getCookies = cookies.getAll(); // New Login Data request\n\n            _context5.next = 3;\n            return fetch(baseConfig.baseURL + '/tasks', {\n              method: 'POST',\n              headers: {\n                \"Content-type\": \"application/json\",\n                \"Authorization\": \"Bearer \".concat(getCookies.accessToken)\n              },\n              body: JSON.stringify({\n                \"objective\": objective,\n                \"status\": status,\n                \"priority\": priority,\n                \"assignee\": assignee\n              })\n            }).then(function (response) {\n              return response.json();\n            })[\"catch\"](function (error) {\n              return error;\n            });\n\n          case 3:\n            newTask = _context5.sent;\n\n            if (!newTask) {\n              _context5.next = 6;\n              break;\n            }\n\n            return _context5.abrupt(\"return\", newTask);\n\n          case 6:\n          case \"end\":\n            return _context5.stop();\n        }\n      }\n    }, _callee5);\n  }));\n  return _createTask.apply(this, arguments);\n}\n\nexport function getTasks(_x15, _x16) {\n  return _getTasks.apply(this, arguments);\n}\n\nfunction _getTasks() {\n  _getTasks = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee6(limit, token) {\n    var getCookies, newTask;\n    return _regeneratorRuntime.wrap(function _callee6$(_context6) {\n      while (1) {\n        switch (_context6.prev = _context6.next) {\n          case 0:\n            getCookies = cookies.getAll(); // New Login Data request\n\n            _context6.next = 3;\n            return fetch(baseConfig.baseURL + '/tasks?limit=' + limit, {\n              method: 'GET',\n              headers: {\n                \"Content-type\": \"application/json\",\n                \"Authorization\": \"Bearer \".concat(getCookies.accessToken ? getCookies.accessToken : token)\n              }\n            }).then(function (response) {\n              if (response.status == 403) {\n                return 'Not Authorized';\n              }\n\n              return response.json();\n            })[\"catch\"](function (error) {\n              return error;\n            });\n\n          case 3:\n            newTask = _context6.sent;\n\n            if (!newTask) {\n              _context6.next = 6;\n              break;\n            }\n\n            return _context6.abrupt(\"return\", newTask);\n\n          case 6:\n          case \"end\":\n            return _context6.stop();\n        }\n      }\n    }, _callee6);\n  }));\n  return _getTasks.apply(this, arguments);\n}\n\nexport function removeTask(_x17) {\n  return _removeTask.apply(this, arguments);\n}\n\nfunction _removeTask() {\n  _removeTask = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee7(taskId) {\n    var getCookies, newTask;\n    return _regeneratorRuntime.wrap(function _callee7$(_context7) {\n      while (1) {\n        switch (_context7.prev = _context7.next) {\n          case 0:\n            getCookies = cookies.getAll(); // New Login Data request\n\n            _context7.next = 3;\n            return fetch(baseConfig.baseURL + \"/tasks/\".concat(taskId), {\n              method: 'DELETE',\n              headers: {\n                \"Authorization\": \"Bearer \".concat(getCookies.accessToken ? getCookies.accessToken : token)\n              }\n            }).then(function (response) {\n              return response.json();\n            })[\"catch\"](function (error) {\n              return error;\n            });\n\n          case 3:\n            newTask = _context7.sent;\n\n            if (!newTask) {\n              _context7.next = 6;\n              break;\n            }\n\n            return _context7.abrupt(\"return\", newTask);\n\n          case 6:\n          case \"end\":\n            return _context7.stop();\n        }\n      }\n    }, _callee7);\n  }));\n  return _removeTask.apply(this, arguments);\n}\n\nexport function updateTaskStatus(_x18, _x19) {\n  return _updateTaskStatus.apply(this, arguments);\n}\n\nfunction _updateTaskStatus() {\n  _updateTaskStatus = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee8(taskId, newstatus) {\n    var getCookies, newTask;\n    return _regeneratorRuntime.wrap(function _callee8$(_context8) {\n      while (1) {\n        switch (_context8.prev = _context8.next) {\n          case 0:\n            getCookies = cookies.getAll(); // New Login Data request\n\n            _context8.next = 3;\n            return fetch(baseConfig.baseURL + \"/tasks/\".concat(taskId), {\n              method: 'PATCH',\n              headers: {\n                \"Content-type\": \"application/json\",\n                \"Authorization\": \"Bearer \".concat(getCookies.accessToken ? getCookies.accessToken : token)\n              },\n              body: JSON.stringify({\n                \"status\": newstatus\n              })\n            }).then(function (response) {\n              return response.json();\n            })[\"catch\"](function (error) {\n              return error;\n            });\n\n          case 3:\n            newTask = _context8.sent;\n\n            if (!newTask) {\n              _context8.next = 6;\n              break;\n            }\n\n            return _context8.abrupt(\"return\", newTask);\n\n          case 6:\n          case \"end\":\n            return _context8.stop();\n        }\n      }\n    }, _callee8);\n  }));\n  return _updateTaskStatus.apply(this, arguments);\n}\n\nexport function searchProjects(_x20) {\n  return _searchProjects.apply(this, arguments);\n}\n\nfunction _searchProjects() {\n  _searchProjects = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee9(newQuery) {\n    var newSearch;\n    return _regeneratorRuntime.wrap(function _callee9$(_context9) {\n      while (1) {\n        switch (_context9.prev = _context9.next) {\n          case 0:\n            _context9.next = 2;\n            return fetch(baseConfig.baseURL + \"/searchprojects/\" + newQuery, {\n              method: 'GET',\n              headers: {\n                \"Content-type\": \"application/json\"\n              }\n            }).then(function (response) {\n              return response.json();\n            })[\"catch\"](function (error) {\n              return error;\n            });\n\n          case 2:\n            newSearch = _context9.sent;\n\n            if (!newSearch) {\n              _context9.next = 5;\n              break;\n            }\n\n            return _context9.abrupt(\"return\", newSearch);\n\n          case 5:\n          case \"end\":\n            return _context9.stop();\n        }\n      }\n    }, _callee9);\n  }));\n  return _searchProjects.apply(this, arguments);\n}\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Logout\");\n$RefreshReg$(_c2, \"Logout\");","map":{"version":3,"sources":["/Users/williamforte/Canvas/SynapseFlash/services/apiservice.js"],"names":["Router","Cookies","jwt_decode","baseConfig","cookies","createProfile","firstname","lastname","email","password","fetch","baseURL","method","headers","body","JSON","stringify","then","response","json","data","console","log","error","loginRequest","set","accessToken","refreshToken","decoded","name","refreshKey","permissionLevel","userId","newLogin","Logout","remove","push","submitContact","message","cellphone","res","status","newfetch","createTask","objective","priority","assignee","getCookies","getAll","newTask","getTasks","limit","token","removeTask","taskId","updateTaskStatus","newstatus","searchProjects","newQuery","newSearch"],"mappings":"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","sourcesContent":["import Router from 'next/router';\nimport { Cookies } from 'react-cookie';\nimport jwt_decode from 'jwt-decode';\nimport { baseConfig } from './restservice';\n\nconst cookies = new Cookies();\n\nexport async function createProfile(firstname, lastname, email, password) {\n    // Request data to post to createprofile route on rest api\n    fetch(baseConfig.baseURL + '/users', {\n        method: 'POST',\n        headers: {\n            \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            \"firstName\": firstname,\n            \"lastName\": lastname,\n            \"email\": email,\n            \"password\": password\n        })\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .then(function(data) {\n        console.log('Request succeeded with JSON response', data);\n    })\n    .catch(function(error) {\n        console.log('Request failed', error);\n    });\n}\n\nexport async function loginRequest(email, password) {\n    // New Login Data request\n    const newLogin = await fetch(baseConfig.baseURL + '/auth', {\n        method: 'POST',\n        headers: {\n            \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            \"email\": email,\n            \"password\": password\n        })\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .then(function(data) {\n        cookies.set('accessToken', data.accessToken);\n        cookies.set('refreshToken', data.refreshToken);\n        const decoded = jwt_decode(data.accessToken);\n        cookies.set('name', decoded.name)\n        cookies.set('email', decoded.email)\n        cookies.set('refreshKey', decoded.refreshKey)\n        cookies.set('permission_level', decoded.permissionLevel)\n        cookies.set('userId', decoded.userId)\n    })\n    .catch(function(error) {\n        return error\n    });\n    if(newLogin) {\n        return \"Username/Password does not match our records!\"\n    }\n}\n\nexport async function Logout() {\n    cookies.remove('accessToken');\n    cookies.remove('permission_level')\n    cookies.remove('refreshToken');\n    cookies.remove('name')\n    cookies.remove('email')\n    cookies.remove('refreshKey')\n    cookies.remove('userId')\n    await Router.push(\"/login\");\n}\n\nexport async function submitContact(name, message, email, cellphone) {\n    // Request data to post to createprofile route on rest api\n    const newfetch = await fetch(baseConfig.baseURL + '/contact', {\n        method: 'POST',\n        headers: {\n            \"Content-type\": \"application/json\"\n        },\n        body: JSON.stringify({\n            \"name\": name,\n            \"message\": message,\n            \"cellphone\": cellphone,\n            \"email\": email\n        })\n    })\n    .then(function(res) {\n        return res.status\n    })\n    .catch(function(error) {\n        console.log('Request failed', error);\n    });\n\n    if(newfetch) {\n        return newfetch\n    } else {\n        return 404\n    }\n}\n\nexport async function createTask(objective, status, priority, assignee) {\n    \n    const getCookies = cookies.getAll()\n    // New Login Data request\n    const newTask = await fetch(baseConfig.baseURL + '/tasks', {\n        method: 'POST',\n        headers: {\n            \"Content-type\": \"application/json\",\n            \"Authorization\": `Bearer ${getCookies.accessToken}`\n        },\n        body: JSON.stringify({\n            \"objective\": objective,\n            \"status\": status,\n            \"priority\": priority,\n            \"assignee\": assignee,\n        })\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .catch(function(error) {\n        return error\n    });\n    if(newTask) {\n        return newTask\n    }\n}\n\nexport async function getTasks(limit, token) {\n    \n    const getCookies = cookies.getAll()\n    // New Login Data request\n    const newTask = await fetch(baseConfig.baseURL + '/tasks?limit=' + limit, {\n        method: 'GET',\n        headers: {\n            \"Content-type\": \"application/json\",\n            \"Authorization\": `Bearer ${getCookies.accessToken ? getCookies.accessToken: token}`\n        }\n    })\n    .then(function(response) {\n        if(response.status == 403) {\n            return 'Not Authorized'\n        }\n        return response.json();\n    })\n    .catch(function(error) {\n        return error\n    });\n    if(newTask) {\n        return newTask\n    }\n}\n\nexport async function removeTask(taskId) {\n    \n    const getCookies = cookies.getAll()\n    // New Login Data request\n    const newTask = await fetch(baseConfig.baseURL + `/tasks/${taskId}`, {\n        method: 'DELETE',\n        headers: {\n            \"Authorization\": `Bearer ${getCookies.accessToken ? getCookies.accessToken: token}`\n        }\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .catch(function(error) {\n        return error\n    });\n    if(newTask) {\n        return newTask\n    }\n}\n\nexport async function updateTaskStatus(taskId, newstatus) {\n    \n    const getCookies = cookies.getAll()\n    // New Login Data request\n    const newTask = await fetch(baseConfig.baseURL + `/tasks/${taskId}`, {\n        method: 'PATCH',\n        headers: {\n            \"Content-type\": \"application/json\",\n            \"Authorization\": `Bearer ${getCookies.accessToken ? getCookies.accessToken: token}`\n        },\n        body: JSON.stringify({\n            \"status\": newstatus\n        })\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .catch(function(error) {\n        return error\n    });\n    if(newTask) {\n        return newTask\n    }\n}\n\nexport async function searchProjects(newQuery) {\n    // New Login Data request\n    const newSearch = await fetch(baseConfig.baseURL + `/searchprojects/` + newQuery, {\n        method: 'GET',\n        headers: {\n            \"Content-type\": \"application/json\"\n        },\n    })\n    .then(function(response) {\n        return response.json();\n    })\n    .catch(function(error) {\n        return error\n    });\n    if(newSearch) {\n        return newSearch\n    }\n}\n"]},"metadata":{},"sourceType":"module"}